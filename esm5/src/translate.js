import { parseTranslation, translate as _translate } from './utils/translations';
/**
 * Load translations for `$localize`.
 *
 * The given `translations` are processed and added to a lookup based on their `MessageId`.
 * A new translation will overwrite a previous translation if it has the same `MessageId`.
 *
 * * If a message is generated by the Angular compiler from an `i18n` marker in a template, the
 *   `MessageId` is passed through to the `$localize` call as a custom `MessageId`. The `MessageId`
 *   will match what is extracted into translation files.
 *
 * * If the translation is from a call to `$localize` in application code, and no custom `MessageId`
 *   is provided, then the `MessageId` can be generated by passing the tagged string message-parts
 *   to the `parseMessage()` function (not currently public API).
 *
 * @publicApi
 *
 */
export function loadTranslations(translations) {
    // Ensure the translate function exists
    if (!$localize.translate) {
        $localize.translate = translate;
    }
    if (!$localize.TRANSLATIONS) {
        $localize.TRANSLATIONS = {};
    }
    Object.keys(translations).forEach(function (key) {
        $localize.TRANSLATIONS[key] = parseTranslation(translations[key]);
    });
}
/**
 * Remove all translations for `$localize`.
 *
 * @publicApi
 */
export function clearTranslations() {
    $localize.TRANSLATIONS = {};
}
/**
 * Translate the text of the given message, using the loaded translations.
 *
 * This function may reorder (or remove) substitutions as indicated in the matching translation.
 */
export function translate(messageParts, substitutions) {
    try {
        return _translate($localize.TRANSLATIONS, messageParts, substitutions);
    }
    catch (e) {
        console.warn(e.message);
        return [messageParts, substitutions];
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidHJhbnNsYXRlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcGFja2FnZXMvbG9jYWxpemUvc3JjL3RyYW5zbGF0ZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFTQSxPQUFPLEVBQW9CLGdCQUFnQixFQUFFLFNBQVMsSUFBSSxVQUFVLEVBQUMsTUFBTSxzQkFBc0IsQ0FBQztBQVVsRzs7Ozs7Ozs7Ozs7Ozs7OztHQWdCRztBQUNILE1BQU0sVUFBVSxnQkFBZ0IsQ0FBQyxZQUE4QztJQUM3RSx1Q0FBdUM7SUFDdkMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxTQUFTLEVBQUU7UUFDeEIsU0FBUyxDQUFDLFNBQVMsR0FBRyxTQUFTLENBQUM7S0FDakM7SUFDRCxJQUFJLENBQUMsU0FBUyxDQUFDLFlBQVksRUFBRTtRQUMzQixTQUFTLENBQUMsWUFBWSxHQUFHLEVBQUUsQ0FBQztLQUM3QjtJQUNELE1BQU0sQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsT0FBTyxDQUFDLFVBQUEsR0FBRztRQUNuQyxTQUFTLENBQUMsWUFBWSxDQUFDLEdBQUcsQ0FBQyxHQUFHLGdCQUFnQixDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ3BFLENBQUMsQ0FBQyxDQUFDO0FBQ0wsQ0FBQztBQUVEOzs7O0dBSUc7QUFDSCxNQUFNLFVBQVUsaUJBQWlCO0lBQy9CLFNBQVMsQ0FBQyxZQUFZLEdBQUcsRUFBRSxDQUFDO0FBQzlCLENBQUM7QUFFRDs7OztHQUlHO0FBQ0gsTUFBTSxVQUFVLFNBQVMsQ0FBQyxZQUFrQyxFQUFFLGFBQTZCO0lBRXpGLElBQUk7UUFDRixPQUFPLFVBQVUsQ0FBQyxTQUFTLENBQUMsWUFBWSxFQUFFLFlBQVksRUFBRSxhQUFhLENBQUMsQ0FBQztLQUN4RTtJQUFDLE9BQU8sQ0FBQyxFQUFFO1FBQ1YsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7UUFDeEIsT0FBTyxDQUFDLFlBQVksRUFBRSxhQUFhLENBQUMsQ0FBQztLQUN0QztBQUNILENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgR29vZ2xlIEluYy4gQWxsIFJpZ2h0cyBSZXNlcnZlZC5cbiAqXG4gKiBVc2Ugb2YgdGhpcyBzb3VyY2UgY29kZSBpcyBnb3Zlcm5lZCBieSBhbiBNSVQtc3R5bGUgbGljZW5zZSB0aGF0IGNhbiBiZVxuICogZm91bmQgaW4gdGhlIExJQ0VOU0UgZmlsZSBhdCBodHRwczovL2FuZ3VsYXIuaW8vbGljZW5zZVxuICovXG5pbXBvcnQge0xvY2FsaXplRm59IGZyb20gJy4vbG9jYWxpemUnO1xuaW1wb3J0IHtNZXNzYWdlSWQsIFRhcmdldE1lc3NhZ2V9IGZyb20gJy4vdXRpbHMvbWVzc2FnZXMnO1xuaW1wb3J0IHtQYXJzZWRUcmFuc2xhdGlvbiwgcGFyc2VUcmFuc2xhdGlvbiwgdHJhbnNsYXRlIGFzIF90cmFuc2xhdGV9IGZyb20gJy4vdXRpbHMvdHJhbnNsYXRpb25zJztcblxuLyoqXG4gKiBXZSBhdWdtZW50IHRoZSBgJGxvY2FsaXplYCBvYmplY3QgdG8gYWxzbyBzdG9yZSB0aGUgdHJhbnNsYXRpb25zLlxuICpcbiAqIE5vdGUgdGhhdCBiZWNhdXNlIHRoZSBUUkFOU0xBVElPTlMgYXJlIGF0dGFjaGVkIHRvIGEgZ2xvYmFsIG9iamVjdCwgdGhleSB3aWxsIGJlIHNoYXJlZCBiZXR3ZWVuXG4gKiBhbGwgYXBwbGljYXRpb25zIHRoYXQgYXJlIHJ1bm5pbmcgaW4gYSBzaW5nbGUgcGFnZSBvZiB0aGUgYnJvd3Nlci5cbiAqL1xuZGVjbGFyZSBjb25zdCAkbG9jYWxpemU6IExvY2FsaXplRm4me1RSQU5TTEFUSU9OUzogUmVjb3JkPE1lc3NhZ2VJZCwgUGFyc2VkVHJhbnNsYXRpb24+fTtcblxuLyoqXG4gKiBMb2FkIHRyYW5zbGF0aW9ucyBmb3IgYCRsb2NhbGl6ZWAuXG4gKlxuICogVGhlIGdpdmVuIGB0cmFuc2xhdGlvbnNgIGFyZSBwcm9jZXNzZWQgYW5kIGFkZGVkIHRvIGEgbG9va3VwIGJhc2VkIG9uIHRoZWlyIGBNZXNzYWdlSWRgLlxuICogQSBuZXcgdHJhbnNsYXRpb24gd2lsbCBvdmVyd3JpdGUgYSBwcmV2aW91cyB0cmFuc2xhdGlvbiBpZiBpdCBoYXMgdGhlIHNhbWUgYE1lc3NhZ2VJZGAuXG4gKlxuICogKiBJZiBhIG1lc3NhZ2UgaXMgZ2VuZXJhdGVkIGJ5IHRoZSBBbmd1bGFyIGNvbXBpbGVyIGZyb20gYW4gYGkxOG5gIG1hcmtlciBpbiBhIHRlbXBsYXRlLCB0aGVcbiAqICAgYE1lc3NhZ2VJZGAgaXMgcGFzc2VkIHRocm91Z2ggdG8gdGhlIGAkbG9jYWxpemVgIGNhbGwgYXMgYSBjdXN0b20gYE1lc3NhZ2VJZGAuIFRoZSBgTWVzc2FnZUlkYFxuICogICB3aWxsIG1hdGNoIHdoYXQgaXMgZXh0cmFjdGVkIGludG8gdHJhbnNsYXRpb24gZmlsZXMuXG4gKlxuICogKiBJZiB0aGUgdHJhbnNsYXRpb24gaXMgZnJvbSBhIGNhbGwgdG8gYCRsb2NhbGl6ZWAgaW4gYXBwbGljYXRpb24gY29kZSwgYW5kIG5vIGN1c3RvbSBgTWVzc2FnZUlkYFxuICogICBpcyBwcm92aWRlZCwgdGhlbiB0aGUgYE1lc3NhZ2VJZGAgY2FuIGJlIGdlbmVyYXRlZCBieSBwYXNzaW5nIHRoZSB0YWdnZWQgc3RyaW5nIG1lc3NhZ2UtcGFydHNcbiAqICAgdG8gdGhlIGBwYXJzZU1lc3NhZ2UoKWAgZnVuY3Rpb24gKG5vdCBjdXJyZW50bHkgcHVibGljIEFQSSkuXG4gKlxuICogQHB1YmxpY0FwaVxuICpcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGxvYWRUcmFuc2xhdGlvbnModHJhbnNsYXRpb25zOiBSZWNvcmQ8TWVzc2FnZUlkLCBUYXJnZXRNZXNzYWdlPikge1xuICAvLyBFbnN1cmUgdGhlIHRyYW5zbGF0ZSBmdW5jdGlvbiBleGlzdHNcbiAgaWYgKCEkbG9jYWxpemUudHJhbnNsYXRlKSB7XG4gICAgJGxvY2FsaXplLnRyYW5zbGF0ZSA9IHRyYW5zbGF0ZTtcbiAgfVxuICBpZiAoISRsb2NhbGl6ZS5UUkFOU0xBVElPTlMpIHtcbiAgICAkbG9jYWxpemUuVFJBTlNMQVRJT05TID0ge307XG4gIH1cbiAgT2JqZWN0LmtleXModHJhbnNsYXRpb25zKS5mb3JFYWNoKGtleSA9PiB7XG4gICAgJGxvY2FsaXplLlRSQU5TTEFUSU9OU1trZXldID0gcGFyc2VUcmFuc2xhdGlvbih0cmFuc2xhdGlvbnNba2V5XSk7XG4gIH0pO1xufVxuXG4vKipcbiAqIFJlbW92ZSBhbGwgdHJhbnNsYXRpb25zIGZvciBgJGxvY2FsaXplYC5cbiAqXG4gKiBAcHVibGljQXBpXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBjbGVhclRyYW5zbGF0aW9ucygpIHtcbiAgJGxvY2FsaXplLlRSQU5TTEFUSU9OUyA9IHt9O1xufVxuXG4vKipcbiAqIFRyYW5zbGF0ZSB0aGUgdGV4dCBvZiB0aGUgZ2l2ZW4gbWVzc2FnZSwgdXNpbmcgdGhlIGxvYWRlZCB0cmFuc2xhdGlvbnMuXG4gKlxuICogVGhpcyBmdW5jdGlvbiBtYXkgcmVvcmRlciAob3IgcmVtb3ZlKSBzdWJzdGl0dXRpb25zIGFzIGluZGljYXRlZCBpbiB0aGUgbWF0Y2hpbmcgdHJhbnNsYXRpb24uXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiB0cmFuc2xhdGUobWVzc2FnZVBhcnRzOiBUZW1wbGF0ZVN0cmluZ3NBcnJheSwgc3Vic3RpdHV0aW9uczogcmVhZG9ubHkgYW55W10pOlxuICAgIFtUZW1wbGF0ZVN0cmluZ3NBcnJheSwgcmVhZG9ubHkgYW55W11dIHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gX3RyYW5zbGF0ZSgkbG9jYWxpemUuVFJBTlNMQVRJT05TLCBtZXNzYWdlUGFydHMsIHN1YnN0aXR1dGlvbnMpO1xuICB9IGNhdGNoIChlKSB7XG4gICAgY29uc29sZS53YXJuKGUubWVzc2FnZSk7XG4gICAgcmV0dXJuIFttZXNzYWdlUGFydHMsIHN1YnN0aXR1dGlvbnNdO1xuICB9XG59XG4iXX0=