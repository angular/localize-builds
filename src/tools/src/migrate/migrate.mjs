/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
/** Migrates the legacy message IDs within a single file. */
export function migrateFile(sourceCode, mapping) {
    const legacyIds = Object.keys(mapping);
    for (const legacyId of legacyIds) {
        const cannonicalId = mapping[legacyId];
        const pattern = new RegExp(escapeRegExp(legacyId), 'g');
        sourceCode = sourceCode.replace(pattern, cannonicalId);
    }
    return sourceCode;
}
/** Escapes special regex characters in a string. */
function escapeRegExp(str) {
    return str.replace(/([.*+?^=!:${}()|[\]\/\\])/g, '\\$1');
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibWlncmF0ZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL3BhY2thZ2VzL2xvY2FsaXplL3NyYy90b29scy9zcmMvbWlncmF0ZS9taWdyYXRlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOzs7Ozs7R0FNRztBQU9ILDREQUE0RDtBQUM1RCxNQUFNLFVBQVUsV0FBVyxDQUFDLFVBQWtCLEVBQUUsT0FBeUI7SUFDdkUsTUFBTSxTQUFTLEdBQUcsTUFBTSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQztJQUV2QyxLQUFLLE1BQU0sUUFBUSxJQUFJLFNBQVMsRUFBRTtRQUNoQyxNQUFNLFlBQVksR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDdkMsTUFBTSxPQUFPLEdBQUcsSUFBSSxNQUFNLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1FBQ3hELFVBQVUsR0FBRyxVQUFVLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxZQUFZLENBQUMsQ0FBQztLQUN4RDtJQUVELE9BQU8sVUFBVSxDQUFDO0FBQ3BCLENBQUM7QUFFRCxvREFBb0Q7QUFDcEQsU0FBUyxZQUFZLENBQUMsR0FBVztJQUMvQixPQUFPLEdBQUcsQ0FBQyxPQUFPLENBQUMsNEJBQTRCLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDM0QsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQGxpY2Vuc2VcbiAqIENvcHlyaWdodCBHb29nbGUgTExDIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogVXNlIG9mIHRoaXMgc291cmNlIGNvZGUgaXMgZ292ZXJuZWQgYnkgYW4gTUlULXN0eWxlIGxpY2Vuc2UgdGhhdCBjYW4gYmVcbiAqIGZvdW5kIGluIHRoZSBMSUNFTlNFIGZpbGUgYXQgaHR0cHM6Ly9hbmd1bGFyLmlvL2xpY2Vuc2VcbiAqL1xuXG4vKiogTWFwcGluZyBiZXR3ZWVuIGxlZ2FjeSBtZXNzYWdlIElEcyBhbmQgdGhlaXIgY2Fubm9uaWNhbCBjb3VudGVycGFydHMuICovXG5leHBvcnQgdHlwZSBNaWdyYXRpb25NYXBwaW5nID0ge1xuICBbbGVnYWN5SWQ6IHN0cmluZ106IHN0cmluZztcbn07XG5cbi8qKiBNaWdyYXRlcyB0aGUgbGVnYWN5IG1lc3NhZ2UgSURzIHdpdGhpbiBhIHNpbmdsZSBmaWxlLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIG1pZ3JhdGVGaWxlKHNvdXJjZUNvZGU6IHN0cmluZywgbWFwcGluZzogTWlncmF0aW9uTWFwcGluZykge1xuICBjb25zdCBsZWdhY3lJZHMgPSBPYmplY3Qua2V5cyhtYXBwaW5nKTtcblxuICBmb3IgKGNvbnN0IGxlZ2FjeUlkIG9mIGxlZ2FjeUlkcykge1xuICAgIGNvbnN0IGNhbm5vbmljYWxJZCA9IG1hcHBpbmdbbGVnYWN5SWRdO1xuICAgIGNvbnN0IHBhdHRlcm4gPSBuZXcgUmVnRXhwKGVzY2FwZVJlZ0V4cChsZWdhY3lJZCksICdnJyk7XG4gICAgc291cmNlQ29kZSA9IHNvdXJjZUNvZGUucmVwbGFjZShwYXR0ZXJuLCBjYW5ub25pY2FsSWQpO1xuICB9XG5cbiAgcmV0dXJuIHNvdXJjZUNvZGU7XG59XG5cbi8qKiBFc2NhcGVzIHNwZWNpYWwgcmVnZXggY2hhcmFjdGVycyBpbiBhIHN0cmluZy4gKi9cbmZ1bmN0aW9uIGVzY2FwZVJlZ0V4cChzdHI6IHN0cmluZyk6IHN0cmluZyB7XG4gIHJldHVybiBzdHIucmVwbGFjZSgvKFsuKis/Xj0hOiR7fSgpfFtcXF1cXC9cXFxcXSkvZywgJ1xcXFwkMScpO1xufVxuIl19